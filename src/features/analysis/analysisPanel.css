/* src/features/analysis/analysisPanel.css */

#analysis-panel-container {
  display: flex;
  flex-direction: column; /* Элементы идут друг под другом: PGN nav, Lines, Main controls */
  gap: 12px; /* Отступ между основными блоками */
  padding: 10px;
  background-color: var(--color-bg-secondary); /* #262421 */
  border-radius: var(--panel-border-radius); /* 8px */
  height: 100%;
  box-sizing: border-box;
  overflow-y: auto;
}

/* Общие стили для групп кнопок */
#analysis-panel-container .button-group {
  display: flex;
  gap: 10px;
}

#analysis-panel-container .button-group.vertical {
  flex-direction: column;
}

#analysis-panel-container .button-group.horizontal {
  flex-direction: row;
  justify-content: space-between;
}

/* Базовый стиль для кнопок ВНУТРИ этой панели */
#analysis-panel-container .button {
  width: 100%; /* Для кнопок в вертикальной группе */
  padding: 8px 10px;
  font-size: 0.9em;
  margin: 0;
  box-sizing: border-box;
  min-height: 38px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1.2;
  border-radius: var(--panel-border-radius); /* 8px */
  border: 1px solid var(--color-border-hover); /* #4d4a47 */
  background-color: var(--color-bg-tertiary); /* #33312e */
  color: var(--color-text-default); /* #eaeaea */
  cursor: pointer;
  transition: background-color 0.2s ease, border-color 0.2s ease, opacity 0.2s ease, color 0.2s ease;
  text-align: center;
  white-space: nowrap;
}

#analysis-panel-container .button:hover:not(:disabled) {
  background-color: var(--color-border-hover); /* #4d4a47 */
  border-color: var(--color-accent-primary); /* #bf811d */
}

#analysis-panel-container .button:disabled,
#analysis-panel-container .button[disabled] { /* Добавлен селектор атрибута для надежности */
  opacity: 0.5; 
  cursor: not-allowed;
  background-color: var(--color-bg-tertiary); 
  border-color: var(--color-border); 
  color: var(--color-text-muted); 
}

/* Кнопки навигации PGN */
#pgn-navigation-controls { 
  margin-bottom: 0; 
  gap: 5px;
}

#pgn-navigation-controls .button.pgn-nav-button {
  flex-grow: 1;
  font-size: 0.85em;
  padding: 6px 8px;
}

/* Стиль для кнопок PGN, когда анализ активен и игра НЕ активна */
#pgn-navigation-controls .button.pgn-nav-button.active-analysis-mode {
  background-color: var(--color-accent-info); /* #0072b1 */
  border-color: var(--color-accent-info);
  color: var(--color-text-on-accent); /* #ffffff */
}
#pgn-navigation-controls .button.pgn-nav-button.active-analysis-mode:hover:not(:disabled) {
  background-color: #005f92; /* Darker info */
  border-color: #005f92;
}
/* Когда .active-analysis-mode и :disabled, общий стиль .button:disabled должен применяться */

/* Основные управляющие кнопки в #main-controls */
#main-controls.button-group.vertical .button {
   width: 100%;
}

/* Стилизация конкретных кнопок */

/* Кнопка "Next Puzzle" */
#main-controls .button.game-control-button.primary-button {
  background-color: var(--color-accent-success);
  border-color: var(--color-accent-success);
  color: var(--color-text-on-accent);
}
#main-controls .button.game-control-button.primary-button:hover:not(:disabled) {
  background-color: #4f7a1e; 
  border-color: #4f7a1e;
}
/* Явное определение стилей для :disabled, чтобы переопределить базовые цветные стили */
#main-controls .button.game-control-button.primary-button:disabled,
#main-controls .button.game-control-button.primary-button[disabled] {
  background-color: var(--color-bg-tertiary);
  border-color: var(--color-border);
  color: var(--color-text-muted);
  opacity: 0.5;
  cursor: not-allowed;
}


/* Кнопка "Restart Task" */
#main-controls .button.game-control-button:nth-of-type(2) { /* Предполагаем, что это кнопка Restart */
  background-color: var(--color-accent-warning);
  border-color: var(--color-accent-warning);
  color: var(--color-text-on-accent);
}
#main-controls .button.game-control-button:nth-of-type(2):hover:not(:disabled) {
  background-color: #c75a07; 
  border-color: #c75a07;
}
#main-controls .button.game-control-button:nth-of-type(2):disabled,
#main-controls .button.game-control-button:nth-of-type(2)[disabled] {
  background-color: var(--color-bg-tertiary);
  border-color: var(--color-border);
  color: var(--color-text-muted);
  opacity: 0.5;
  cursor: not-allowed;
}

/* Кнопка "Analysis" / "Finish Analysis" / "Resign" - ее :disabled состояние управляется общим правилом */
#main-controls .button.analysis-toggle-button { 
  background-color: var(--color-accent-special); 
  border-color: var(--color-accent-special);
  color: var(--color-text-on-accent);
}
#main-controls .button.analysis-toggle-button:hover:not(:disabled) {
  background-color: #93259e; 
  border-color: #93259e;
}

#main-controls .button.analysis-toggle-button.active-analysis { 
  background-color: var(--color-accent-info); 
  border-color: var(--color-accent-info);
  color: var(--color-text-on-accent);
}
#main-controls .button.analysis-toggle-button.active-analysis:hover:not(:disabled) {
  background-color: #005f92; 
  border-color: #005f92;
}

#main-controls .button.analysis-toggle-button.resign-button {
  background-color: var(--color-accent-error); 
  border-color: var(--color-accent-error);
  color: var(--color-text-on-accent);
}
#main-controls .button.analysis-toggle-button.resign-button:hover:not(:disabled) {
  background-color: #a52a27; 
  border-color: #a52a27;
}

/* Кнопка "Set FEN" */
/* Если кнопка "Analysis/Resign" третья, то "Set FEN" будет четвертой */
#main-controls .button.game-control-button:nth-of-type(4) { 
  background-color: var(--color-accent-secondary); 
  border-color: var(--color-accent-secondary);
  color: var(--color-text-on-accent);
}
#main-controls .button.game-control-button:nth-of-type(4):hover:not(:disabled) {
  background-color: #705ce0; 
  border-color: #705ce0;
}
#main-controls .button.game-control-button:nth-of-type(4):disabled,
#main-controls .button.game-control-button:nth-of-type(4)[disabled] {
  background-color: var(--color-bg-tertiary);
  border-color: var(--color-border);
  color: var(--color-text-muted);
  opacity: 0.5;
  cursor: not-allowed;
}


/* Секция с линиями анализа (без изменений) */
.analysis-lines-section {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-family: monospace, "Courier New", Courier;
  font-size: 0.9em;
  min-height: 95px;
  height: 120px;
  overflow-y: auto;
  border: 1px solid var(--color-border); 
  border-radius: var(--panel-border-radius); 
  padding: 8px;
  background-color: var(--color-bg-primary); 
  flex-shrink: 0;
}

.analysis-line-entry {
  display: flex;
  align-items: center;
  padding: 4px 6px;
  border-radius: 4px;
  background-color: var(--color-bg-tertiary); 
  border: 1px solid var(--color-border); 
  overflow: hidden;
  min-height: 28px;
}

.analysis-score-button {
  font-weight: bold;
  padding: 4px 8px;
  border-radius: 3px;
  margin-right: 8px;
  cursor: pointer;
  border: 1px solid transparent;
  color: var(--color-text-on-accent); 
  min-width: 60px;
  text-align: center;
  flex-shrink: 0;
  transition: background-color 0.2s ease, border-color 0.2s ease;
}

.analysis-score-button:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

.analysis-score-button.best-line-score {
  background-color: var(--color-accent-success); 
  border-color: var(--color-accent-success);
}
.analysis-score-button.best-line-score:hover:not(:disabled) {
  background-color: #4a7d1c;
}

.analysis-score-button.second-line-score {
  background-color: var(--color-accent-warning); 
  border-color: var(--color-accent-warning);
}
.analysis-score-button.second-line-score:hover:not(:disabled) {
  background-color: #c75a07;
}

.analysis-score-button.third-line-score {
  background-color: var(--color-accent-error); 
  border-color: var(--color-accent-error);
}
.analysis-score-button.third-line-score:hover:not(:disabled) {
  background-color: #a52a27;
}

.analysis-score-button.other-line-score {
  background-color: var(--color-accent-info); 
  border-color: var(--color-accent-info);
}
.analysis-score-button.other-line-score:hover:not(:disabled) {
  background-color: #005f92;
}

.analysis-pv-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-grow: 1;
  color: var(--color-text-default); 
}

.analysis-lines-section .loading-message,
.analysis-lines-section .no-data-message,
.analysis-lines-section .inactive-message {
  padding: 10px;
  text-align: center;
  color: var(--color-text-muted); 
  font-style: italic;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
}

/* Контейнер для отображения PGN (без изменений) */
#pgn-display-container {
  font-family: monospace, "Courier New", Courier;
  white-space: pre-wrap;
  border: 1px solid var(--color-border); 
  padding: 10px;
  background-color: var(--color-bg-tertiary); 
  border-radius: var(--panel-border-radius); 
  overflow-y: auto;
  flex-grow: 1;
  min-height: 100px;
  font-size: 0.9em;
  color: var(--color-text-default); 
  margin-top: auto; 
}
